{"code":"!function(e){var t={};function r(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"d-flex scaleContainer\"},e._l(e.scales,(function(t){return r(\"div\",{key:t.id,staticClass:\"scale\",class:{active:e.currentScale===t},on:{click:function(r){return e.selectScale(t)}}},[e._v(\"\\n        \"+e._s(t.size)+\"\\n    \")])})),0)};s._withStripped=!0;var i=function(e,t,r,s,i,n,a,o){var c,l=\"function\"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=r,l._compiled=!0),s&&(l.functional=!0),n&&(l._scopeId=\"data-v-\"+n),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):i&&(c=o?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var h=l.render;l.render=function(e,t){return c.call(t),h(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}({data:()=>({scales:[{scale:32,size:\"32x32\",id:\"32\"},{scale:64,size:\"64x64\",id:\"64\"},{scale:128,size:\"128x128\",id:\"128\"}],currentScale:null}),mounted(){this.currentScale=this.scales[0],this.$emit(\"scale-select\",this.currentScale)},methods:{selectScale(e){this.currentScale=e,this.$emit(\"scale-select\",this.currentScale)}}},s,[],!1,null,null,null);i.options.__file=\"src/components/scale-component.vue\";var n=i.exports;new Vue({el:\"#app\",components:{scale:n},data(){return{currentTool:null,tools:[{name:\"pen\",icon:\"fas fa-pen\",id:\"pen\",func:this.penTool},{name:\"bucket\",icon:\"fas fa-fill\",id:\"bucket\",func:this.bucketTool},{name:\"eraser\",icon:\"fas fa-eraser\",id:\"eraser\",func:this.eraserTool},{name:\"stroke\",icon:\"fas fa-pencil-ruler\",id:\"stroke\",func:this.strokeTool}],currentScale:null,primaryColor:\"#000000\",secondaryColor:\"#FF0000\",drawingColor:\"#000000\",frames:[],counter:0,currentFrameNumber:0,isDrawing:!1,isLineDrawing:!1,lineStartX0:0,lineStartY0:0,lastX:0,lastY:0,canvas:null,ctx:null,fps:12,currentAnimationFrame:0,animationTimerId:null}},mounted(){this.canvas=document.getElementById(\"canvas\"),this.ctx=canvas.getContext(\"2d\"),this.currentTool=this.tools[0];let e=this.generateMatrix(this.currentScale.scale);this.frames.push({source:e,id:this.counter}),this.redraw(this.ctx,this.canvas),this.animate()},methods:{selectTool(e){this.currentTool=e},selectScale(e){this.currentScale=e,this.frames[this.currentFrameNumber].source=this.generateMatrix(this.currentScale.scale),this.redraw(this.ctx,this.canvas)},generateMatrix:e=>Array.from({length:e}).fill().map(()=>Array.from({length:e},e=>\"#FFF\")),redraw(e,t){const r=t.width/this.currentScale.scale;for(let t=0;t<this.frames[this.currentFrameNumber].source.length;t+=1)for(let s=0;s<this.frames[this.currentFrameNumber].source[t].length;s+=1)e.fillStyle=this.frames[this.currentFrameNumber].source[t][s],e.fillRect(s*r,t*r,r,r)},penTool(e,t){this.drawLine(this.lastX,this.lastY,e,t)},eraserTool(e,t){const r=Math.floor(e/512*this.currentScale.scale),s=Math.floor(t/512*this.currentScale.scale),i=512/this.currentScale.scale;this.frames[this.currentFrameNumber].source[s][r]=\"#FFF\",this.ctx.clearRect(r*i,s*i,i,i)},drawPixel(e,t){const r=512/this.currentScale.scale;this.frames[this.currentFrameNumber].source[t][e]=this.drawingColor,this.ctx.fillStyle=this.frames[this.currentFrameNumber].source[t][e],this.ctx.fillRect(e*r,t*r,r,r)},drawLine(e,t,r,s){let i=Math.floor(e/512*this.currentScale.scale),n=Math.floor(t/512*this.currentScale.scale),a=Math.floor(r/512*this.currentScale.scale),o=Math.floor(s/512*this.currentScale.scale),c=Math.abs(a-i),l=Math.abs(o-n),h=i<a?1:-1,u=n<o?1:-1,f=c-l;for(;i!==a||n!==o;){this.drawPixel(i,n);let e=2*f;e>-l&&(f-=l,i+=h),e<c&&(f+=c,n+=u)}this.drawPixel(a,o)},strokeTool(e,t){this.isLineDrawing||(this.lineStartX0=e,this.lineStartY0=t,this.isLineDrawing=!0)},onMouseDown(e){this.isDrawing=!0,2===e.button?this.drawingColor=this.secondaryColor:this.drawingColor=this.primaryColor,this.lastX=e.offsetX,this.lastY=e.offsetY,this.currentTool.func(this.lastX,this.lastY)},onMouseMove(e){this.isDrawing&&!this.isLineDrawing&&(this.currentTool.func(e.offsetX,e.offsetY),this.lastX=e.offsetX,this.lastY=e.offsetY)},onMouseUp(e){this.isLineDrawing&&(this.drawLine(this.lineStartX0,this.lineStartY0,e.offsetX,e.offsetY),this.isLineDrawing=!1),(this.isLineDrawing||this.isDrawing)&&this.drawOnFrame(this.currentFrameNumber),this.isDrawing=!1},cancelContextMenu(e){e.preventDefault()},bucketTool(){for(let e=0;e<this.frames[this.currentFrameNumber].source.length;e+=1)for(let t=0;t<this.frames[this.currentFrameNumber].source[e].length;t+=1)this.frames[this.currentFrameNumber].source[t][e]=this.drawingColor;this.ctx.fillStyle=this.drawingColor,this.ctx.fillRect(0,0,512,512)},drawOnFrame(e){let t=document.querySelector(`.frame:nth-child(${e+1}) canvas`),r=t.getContext(\"2d\");this.redraw(r,t)},addNewFrame(){let e=this.generateMatrix(this.currentScale.scale);this.counter+=1,this.frames.push({source:e,id:this.counter}),this.selectFrame(this.frames.length-1)},selectFrame(e){this.currentFrameNumber=e,this.redraw(this.ctx,this.canvas)},deleteFrame(e){1!==this.frames.length&&(this.frames.splice(e,1),e===this.currentFrameNumber?this.selectFrame(0):e<this.currentFrameNumber&&this.selectFrame(this.currentFrameNumber-1))},copyFrame(e){let t=JSON.parse(JSON.stringify(this.frames[e].source));this.counter+=1,this.frames.push({source:t,id:this.counter}),this.selectFrame(this.frames.length-1),setTimeout(()=>this.drawOnFrame(this.frames.length-1),200)},drawForAnimation(){let e=document.getElementById(\"animation\"),t=e.getContext(\"2d\");const r=e.width/this.currentScale.scale;for(let e=0;e<this.frames[this.currentAnimationFrame].source.length;e+=1)for(let s=0;s<this.frames[this.currentAnimationFrame].source[e].length;s+=1)t.fillStyle=this.frames[this.currentAnimationFrame].source[e][s],t.fillRect(s*r,e*r,r,r)},animate(){let e=this;e.animationTimerId=setInterval((function(){e.currentAnimationFrame+1>=e.frames.length?e.currentAnimationFrame=0:e.currentAnimationFrame+=1,e.drawForAnimation()}),1e3/e.fps)}},watch:{fps:function(){clearInterval(this.animationTimerId),this.animate()}}})}]);","extractedComments":[]}